= PlantUML Rules

== Idea

- Stereotypes are used as labels, e.g. `\<<Type>>`
- The stereotypes may contain a modifier `+` indicating a label that shall be added
- The description of a stereotype may contain attribute:value pairs for matching

== Rules

[[plantuml-rule:ComponentDiagramAdoc]]
[plantuml,role=concept]
.The root package contains the components `A`, `B` and `C` with defined dependencies.
----
@startuml
skinparam componentStyle uml2

[root {name:"root"}] as root <<Package>> <<+Root>>
[a {name:"a"}] as a <<Package>> <<+Module>>
[b {name:"b"}] as b <<Package>> <<+Module>>
[c {name:"c"}] as c <<Package>> <<+Module>>

root -up-> a : :CONTAINS
root -up-> b : :CONTAINS
root -up-> c : :CONTAINS

b -> a : +d1:DEFINES_DEPENDENCY
c -> a : +d2:DEFINES_DEPENDENCY

@enduml
----

The example above will be translated into a cypher query like this:

[source,cypher]
----
MATCH
  (root:Package{name:"root"}),
  (a:Package{name:"a"}),
  (b:Package{name:"b"}),
  (c:Package{name:"c"}),
  (root)-[:CONTAINS]->(a),
  (root)-[:CONTAINS]->(b),
  (root)-[:CONTAINS]->(c)
SET
  root:Root
SET
  a:Module
SET
  b:Module
SET
  c:Module
MERGE
  (b)-[d1:DEFINES_DEPENDENCY]->(a)
MERGE
  (c)-[d2:DEFINES_DEPENDENCY]->(a)
RETURN
  root, a, b, c, d1, d2
----

[[plantuml-rule:NestedPackageDiagramAdoc]]
[plantuml,role=concept]
.The package named "root" is labeled with `Root` and contains packages representing the layers of the application. They are labeled with `Layer`.
----
@startuml
skinparam componentStyle uml2

package "{name:'root'}" as root <<Package>> <<+Root>> {
  package "layer" as layer <<Package>> <<+Layer>>
}

root -> layer : :CONTAINS

@enduml
----

[[plantuml-rule:ClassDiagramAdoc]]
[plantuml,role=concept]
.A class diagram
----
@startuml

skinparam componentStyle uml2

class "{name:"AbstractEntity"}" as abstractEntity <<Type>>
class "entity" as entity <<Class>> <<+Entity>>

entity -up-|> abstractEntity  : :EXTENDS*

@enduml
----
